<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <!-- Favicons -->
  <link href="{{ url_for('static', filename='imgs/icons/car-rental.png') }}" rel="icon">
  <link href="{{ url_for('static', filename='imgs/icons/car-rental.png') }}" rel="apple-touch-icon">

  {% if title %}
    <title>{{ title }}</title>
  {% else %}
    <title>Locadora de Veículos</title>
  {% endif %}
  
  <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='css/base.css') }}" rel="stylesheet">

  <!-- import plugin script -->
  <script src="{{ url_for('static', filename='js/moment.min.js') }}"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>

</head>

<body>
  <main>
    <div class="container py-4">
      <header class="pb-3 mb-4 border-bottom">
        <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
          <img src="{{ url_for('static', filename='imgs/icons/car-rental.png') }}" alt="" width="50" height="50" class="d-inline-block align-text-top mr-4">
          <span class="ms-3 fs-3">{{title}}</span>
        </a>
      </header>


<ul class="nav nav-tabs nav-fill mb-3" id="ex1" role="tablist">
  <li class="nav-item" role="presentation">
    <a
      class="nav-link active"
      id="ex2-tab-1"
      data-mdb-toggle="tab"
      href="#ex2-tabs-1"
      role="tab"
      aria-controls="ex2-tabs-1"
      aria-selected="true"
      >Cadastro de veículos</a
    >
  </li>
  <li class="nav-item" role="presentation">
    <a
      class="nav-link"
      id="ex3-tab-3"
      data-mdb-toggle="tab"
      href="#ex3-tabs-3"
      role="tab"
      aria-controls="ex3-tabs-3"
      aria-selected="false"
      >Veículos cadastrados</a
    >
  </li>
</ul>
<!-- Tabs navs -->

<!-- Tabs content -->
<div class="tab-content" id="ex2-content">
  <div
    class="tab-pane fade show active"
    id="ex2-tabs-1"
    role="tabpanel"
    aria-labelledby="ex2-tab-1"
  >
    <div class="p-2 mb-2 bg-light rounded-1">
      <div class="row justify-content-center">
        <div class="col-auto mb-2">
          <h2 class="fs-5 mb-2">Formulário de cadastro</h2>
          <div class="mb-3">
            <label for="modelo-input" class="form-label">Modelo</label>
            <input type="text" class="form-control" id="modelo-input">
          </div>
          <div class="mb-3">
            <label for="ano-input" class="form-label">Ano de fabricação</label>
            <input type="number" class="form-control" id="ano-input">
          </div>
          <div class="mb-3">
            <label for="placa-input" class="form-label">Placa</label>
            <input type="text" class="form-control" maxlength="7" id="placa-input">
          </div>
          <div class="form-check">
            <input id="estado-on-input" name="autoControl" type="radio" class="form-check-input" checked required>
            <label class="form-check-label" for="auto-control-on-input">Liberado</label>
          </div>
          <div class="form-check mb-3">
            <input id="estado-off-input" name="autoControl" type="radio" class="form-check-input" required>
            <label class="form-check-label" for="estado-off-input">Manutenção</label>
          </div>
          <div class="d-flex justify-content-center">
            <button id="cadastrar-button" class="w-50 mt-2 btn btn-primary" type="submit">Cadastrar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="tab-pane fade"
    id="ex3-tabs-3"
    role="tabpanel"
    aria-labelledby="ex3-tab-3"
  >
  <div class="p-2 mb-2 bg-light rounded-1">
    <div class="row">
      <div class="mb-2">
        <label for="filters">Filtros:</label>
          <select name="filters" id="filtros">
            <option value="Todos">Todos</option>
            <option value="NaoAlugado">Sem reservas</option>
            <option value="Alugado">Reservados/Alugados</option>
            <option value="Manutencao">Em manutenção</option>
          </select>
      </div>
    </div>
    <div class="row">
      <div class="mb-2">
        <div id="div-principal"></div>
      </div>
    </div>
  </div>
</div>
<!-- Tabs content -->   
      <footer class="pt-3 mt-4 text-muted border-top">
      </footer>
    </div>
  </main>

</body>

<footer>
  <!--Bootstrap Js-->
  <script src="{{ url_for('static', filename='js/general.js') }}" type="text/javascript"></script>

  <script type="text/babel">
  function createRow(car){
    return (
      <div className="card mb-3">
        <div>
            <div className="p-2 mb-2 rounded-3">
                <div className="card-body">
                    <div className="row align-items-center">
                        <div className="col-auto">
                            <h4>Placa: {car.placa}</h4>
                        </div>
                    </div>
                    <div className="row jus-items-center">
                      <div className="col-auto">
                        <div className="row align-items-center">
                            <div className="col-auto">
                                <span>Ano: {car.ano} </span>
                            </div>
                        </div>
                        <div className="row align-items-center">
                            <div className="col-auto">
                                Modelo: {car.modelo}
                            </div>
                        </div>                    
                        <div className="row mb-2 align-items-center">
                            <div className="col-auto">
                                Estado: {car.estado}
                            </div>
                        </div>    
                        <div className="row mb-2 align-items-center">
                            <div className="col-auto">
                                {car.alugado}
                            </div>
                        </div>
                        <div id={`inicio${car.id}`} className="row align-items-center">
                            <div className="col-auto">
                                {`Início: ${car.inicio_aluguel}`}
                            </div>
                        </div>
                        <div id={`termino${car.id}`} className="row align-items-center">
                            <div className="col-auto">
                                {`Término: ${car.termino_aluguel}`}
                            </div>
                        </div>
                        <div id={`cancelar${car.id}`} className="my-2 col-auto">
                          <div className="ustify-content-center row align-items-center">
                            <button  id={`btncancelar${car.id}`} className="w-100 mt-2 btn btn-primary" type="submit">Cancelar</button>
                          </div>
                        </div>
                      </div>
                      <div className="col-3">
                      </div>
                      <div id={`reservar${car.id}`} className="col-auto">                
                        <div className="row align-items-center">
                          <label>Início da reserva: </label>
                          <input type="date" id={`inicioreserva${car.id}`} className="mb-2"/>
                        </div>
                        <div className="row align-items-center">
                          <label>Término da reserva: </label>
                          <input type="date" id={`terminoreserva${car.id}`} className="mb-2"/>
                        </div>
                        <div className="d-flex justify-content-center row align-items-center">
                          <button  id={`btnreserva${car.id}`} className="w-50 mt-2 btn btn-primary" type="submit">Reservar</button>
                        </div>
                      </div>           
                    </div>
                  </div>
              </div>
          </div>
      </div>
    );
  } 

  function renderRows(cars){
    const carros = cars.map((car) =>
    <div key={car.id}>
        {createRow(car)}
        </div>
        );
    
    ReactDOM.render(
        carros,
        document.getElementById('div-principal')
    );
  }
  </script>  
</footer>